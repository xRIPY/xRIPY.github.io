<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="style.css">
<title> FramesJS.js DEMO </title>
</head>
<body>

<!-- Start -->

<div id="mainArea">
<strong class="red-soft">Welcome!</strong> <br>
<span>This is a simple offline page I made to check videos/GIFs frame by frame.</span>
</div>

<hr class="sep">
<div id="inputArea">
	<label class="inputElement"  id="dropbox" for="fileInput"> Drop file / Click here! </label>
	<input style="display:none" type="file" id="fileInput" onchange="fileInputChange()"> 
	<pre id="info"></pre><br>
	<div class="inputElement" id="UrlFileInput" onclick="FromUrl()">... Or paste URL to resource</div>
</div>

<!-- just pass the script under https://meyerweb.com/eric/tools/dencoder/ -->
<a href="javascript:(function(){
	%2F%2F%20made%20by%20RIPY%20%40xRIPY%0A%0Afunction%20%20FramesJS(HTMLElement)%20%7B%0A%0Alet%20selfReference%20%3D%20this%3B%0Athis.HTMLElement%20%3D%20HTMLElement%3B%0Athis.controllerIntervalId%3B%0Athis.controller%3B%0Athis.aliveCheckIntervalId%3B%0Athis.frameDisplayIntervalId%3B%0Athis.frameDisplayIntervalId%3B%0Athis.currentFrameDisplay%3B%0Athis.totalFramesDisplay%3B%0Athis.fps%20%3D%2024%3B%20%2F%2Fused%20for%20video%0Athis.frameList%20%3D%20%5B%5D%3B%20%2F%2Fused%20for%20gif%0Athis.ctxGifEmulator%3B%20%2F%2Fused%20for%20gif%0Athis.gifEmulatorIntervalId%20%3D%20-1%3B%20%2F%2Fused%20for%20gif%0Athis.isPaused%20%3D%20false%3B%20%2F%2Fused%20for%20gif%0Athis.isEmulatorPreparing%20%3D%20false%3B%20%2F%2Fused%20for%20gif%0Athis.isEmulatorReady%20%3D%20false%3B%20%2F%2Fused%20for%20gif%0Athis.currentFrame%3B%20%2F%2Fused%20for%20video%2Fgif%0Athis.totalFrames%3B%20%2F%2Fused%20for%20video%2Fgif%0A%0Athis.FramesJS_OverlaySystem%20%3D%20function(identifier%2CcoverAll%2CclassNameId%2CinnerHTML%2CcustomCSS%2CborderOffsetPX%20%3D%200)%7B%0A%09%0A%09let%20elementList%20%3D%20%5B%5D%3B%0A%09if(typeof%20identifier%20%3D%3D%3D%20%27string%27%20%7C%7C%20identifier%20instanceof%20String)%20%7B%0A%09%09let%20elements%20%3D%20document.querySelectorAll(identifier)%3B%0A%09%09if%20(elements.length%20%3D%3D%200)%20%7Breturn%20%27%5Bno%20element%20found%5D%27%3B%7D%0A%09%09elements.forEach(function(element)%20%7BelementList.push(element)%7D)%3B%0A%09%7D%20else%20%7B%0A%09%09elementList.push(identifier)%3B%0A%09%7D%0A%09%0A%09let%20overlay%20%3D%20document.createElement(%27div%27)%3B%0A%09overlay.className%20%3D%20classNameId%3B%0A%09overlay.style%20%3D%20%27position%3A%20absolute%3B%20z-index%3A10000%3B%27%3B%0A%09overlay.innerHTML%20%3D%20innerHTML%3B%0A%09let%20overlayList%20%3D%20%5B%5D%3B%0A%09elementList.forEach(function(element)%20%7Blet%20x%20%3D%20overlay.cloneNode(true)%3B%20x.overlayOf%20%3D%20element%3B%20overlayList.push(%7Belement%3Aelement%2C%20overlay%3Ax%7D)%7D)%3B%0A%09%0A%09if(customCSS%20%26%26%20!document.getElementById(classNameId))%7B%0A%09%09let%20style%20%3D%20document.createElement(%27style%27)%3B%0A%09%09style.id%20%3D%20classNameId%3B%0A%09%09style.innerHTML%20%3D%20customCSS%3B%0A%09%09document.querySelector(%27head%27).prepend(style)%3B%0A%09%7D%0A%09%0A%09%2F%2F%20delete%20hidden%20elements%0A%09var%20x%3B%0A%09for(let%20i%20%3D%200%3B%20i%20%3C%20overlayList.length%3B%20i%2B%2B)%20%7B%0A%09%09try%20%7B%20x%20%3D%20overlayList%5Bi%5D.element.getBoundingClientRect()%3B%20%7D%20catch(e)%20%7B%20overlayList.splice(i%2C1)%3B%20i--%3B%20continue%3B%7D%0A%09%09if(x.width%20%3D%3D%200%20%7C%7C%20x.height%20%3D%3D%200)%20%7B%20overlayList.splice(i%2C1)%3B%20i--%3B%20continue%3B%20%7D%20%0A%09%7D%0A%09%09%0A%09%2F%2F%20add%20to%20document%20overlays%0A%09for(let%20i%20%3D%200%3B%20i%20%3C%20overlayList.length%3B%20i%2B%2B)%20%7B%20document.querySelector(%27body%27).prepend(overlayList%5Bi%5D.overlay)%3B%20%7D%0A%09%0A%09AdjustOverlay()%3B%0A%09let%20intervalId%20%3D%20setInterval(AdjustOverlay%2C%20250)%3B%0A%09%0A%09function%20AdjustOverlay()%7B%0A%09%09var%20x%3B%20%0A%09%09for(let%20i%20%3D%200%3B%20i%20%3C%20overlayList.length%3B%20i%2B%2B)%20%7B%0A%09%09%09try%20%7B%20x%20%3D%20overlayList%5Bi%5D.element.getBoundingClientRect()%3B%20%7D%20catch(e)%20%7B%20overlayList.splice(i%2C1)%3B%20i--%3B%20continue%3B%7D%0A%09%09%09if(x.width%20%3D%3D%200%20%7C%7C%20x.height%20%3D%3D%200)%20%7B%20overlayList.splice(i%2C1)%3B%20i--%3B%20continue%3B%20%7D%20%0A%09%09%09if(coverAll)%20%7B%20overlayList%5Bi%5D.overlay.style.width%20%3D%20x.width%2B%27px%27%3B%20overlayList%5Bi%5D.overlay.style.height%20%3D%20x.height%2B%27px%27%3B%20%7D%0A%09%09%09overlayList%5Bi%5D.overlay.style.left%20%3D%20x.left%2Bwindow.scrollX-borderOffsetPX%2B%27px%27%3B%20overlayList%5Bi%5D.overlay.style.top%20%3D%20x.top%2Bwindow.scrollY-borderOffsetPX%2B%27px%27%3B%0A%09%09%7D%0A%09%09%09%0A%09%7D%0A%09%0A%09return%20%7BintervalId%3AintervalId%2C%20overlayList%3AoverlayList%7D%3B%0A%7D%0A%0Athis.SelectElementEvent%20%3D%20function(identifier)%20%7B%0A%09this.Kill(true)%0A%09console.log(%27%5BFramesJS%5D%20Select%20element%20event%3A%20Start%27)%3B%0A%09let%20intervalId%20%3D%20this.FramesJS_OverlaySystem(identifier%2Ctrue%2C%27FramesJS-SelectElementEvent%27%2C%27%27%2C%27.FramesJS-SelectElementEvent%20%7Btransition%3A0.05s%3B%20border%3A%205px%20solid%20%23f00%3B%20cursor%3Apointer%7D%20.FramesJS-SelectElementEvent%3Ahover%20%7Btransition%3A0.2s%3B%20border%3A%205px%20solid%20%230f0%3B%7D%27%2C5)%3B%0A%09if(intervalId%20%3D%3D%20%27%5Bno%20element%20found%5D%27)%20%7Bconsole.log(%27%5BFramesJS%5D%20Select%20element%20event%3A%20Failed%27)%3B%20return%3B%7D%20intervalId%20%3D%20intervalId.intervalId%3B%0A%09elementList%20%3D%20document.querySelectorAll(%27.FramesJS-SelectElementEvent%27)%3B%0A%09elementList.forEach(function(element)%20%7B%20element.addEventListener(%27click%27%2C%20ElementSelected)%20%7D)%3B%0A%09document.addEventListener(%27click%27%2C%20SelectElementCancel)%0A%09%0A%09function%20ElementSelected()%20%7B%0A%09%09console.log(%27%5BFramesJS%5D%20Select%20element%20event%3A%20Success%27)%3B%0A%09%09selfReference.HTMLElement%20%3D%20this.overlayOf%3B%0A%09%09clearInterval(intervalId)%3B%0A%09%09document.querySelectorAll(%27.FramesJS-SelectElementEvent%27).forEach(function(element)%20%7Belement.remove()%3B%7D)%0A%09%09document.removeEventListener(%27click%27%2C%20SelectElementCancel)%3B%0A%09%09try%7B%20document.getElementById(%27FramesJS-SelectElementEvent%27).remove()%20%7D%20catch(e)%20%7B%7D%3B%0A%09%09%0A%09%09selfReference.Start(true)%3B%0A%09%7D%0A%09%0A%09function%20SelectElementCancel()%7B%0A%09%09if(event.target.className%20%3D%3D%20%27FramesJS-SelectElementEvent%27)%20%7Breturn%3B%7D%0A%09%09console.log(%27%5BFramesJS%5D%20Select%20element%20event%3A%20Cancel%27)%3B%0A%09%09clearInterval(intervalId)%3B%0A%09%09document.querySelectorAll(%27.FramesJS-SelectElementEvent%27).forEach(function(element)%20%7Belement.remove()%3B%7D)%0A%09%09document.removeEventListener(%27click%27%2C%20SelectElementCancel)%3B%0A%09%09try%7B%20document.getElementById(%27FramesJS-SelectElementEvent%27).remove()%20%7D%20catch(e)%20%7B%7D%3B%0A%09%7D%0A%7D%0A%0Athis.Kill%20%3D%20function(removeController)%7B%0A%09if(%20this.HTMLElement%20%26%26%20this.HTMLElement%20!%3D%20%27Killed%27%20)%20%7B%20this.HTMLElement.style.visibility%20%3D%20%27visible%27%3B%20%7D%0A%09try%20%7B%20this.ctxGifEmulator.canvas.parentNode.remove()%3B%20%7D%20catch(e)%20%7B%7D%0A%09this.isEmulatorPreparing%20%3D%20false%3B%20%0A%09this.isEmulatorReady%20%3D%20false%3B%0A%09this.isPaused%20%3D%20false%3B%0A%09clearInterval(this.controllerIntervalId)%3B%0A%09clearInterval(this.frameDisplayIntervalId)%3B%0A%09clearInterval(this.gifEmulatorIntervalId)%3B%0A%09clearInterval(this.aliveCheckIntervalId)%3B%0A%09try%20%7B%20this.controller.remove()%3B%7D%20catch(e)%20%7B%7D%0A%09this.frameList%20%3D%20%5B%5D%3B%0A%09this.HTMLElement%20%3D%20%27Killed%27%3B%0A%7D%0A%0Athis.Start%20%3D%20function()%7B%0A%09this.aliveCheckIntervalId%20%3D%20setInterval(function()%20%7B%20if(selfReference.HTMLElement.getBoundingClientRect().width%20%3D%3D%200)%20%7B%20selfReference.Kill()%3B%20%7D%20%7D%2C%20250)%3B%0A%09switch(this.HTMLElement.nodeName)%7B%0A%09%09case%20%27VIDEO%27%3A%20this.VideoPath()%3B%20break%3B%0A%09%09case%20%27IMG%27%3A%20this.ImagePath()%3B%20break%3B%0A%09%09case%20%27IFRAME%27%3A%20this.IframePath()%3B%20break%3B%0A%09%7D%0A%7D%0A%0A%0A%2F%2F%0A%2F%2F%20Common%0A%2F%2F%0A%0Athis.OpenController%20%3D%20function()%7B%20selfReference.controller.style.opacity%20%3D%20%271%27%3B%20%20%7D%0Athis.CloseController%20%3D%20function()%7B%20selfReference.controller.style.opacity%20%3D%20%270%27%3B%20%20%7D%0A%0Athis.OpenSource%20%3D%20function()%7B%0A%09console.log(%27%5BFrameJS%5D%20source%3A%5Cn%27%20%2B%20this.HTMLElement.src)%3B%0A%09if(this.HTMLElement.src)%20%7B%0A%09%09window.open(this.HTMLElement.src%2C%20%27source%27)%3B%0A%09%7D%20else%20%7B%0A%09%09window.open(this.HTMLElement.querySelector(%27source%27).src%2C%20%27source%27)%3B%0A%09%7D%0A%7D%0A%0Athis.SeeTrough%20%3D%20function()%7B%0A%09if%20(this.controller.style.filter%20%3D%3D%20%27opacity(1)%27%20%7C%7C%20this.controller.style.filter%20%3D%3D%20%27%27)%20%7B%20%20this.controller.style.filter%20%3D%20%27opacity(0.2)%27%3B%20%7D%0A%09else%20%7Bthis.controller.style.filter%20%3D%20%27opacity(1)%27%3B%20%7D%0A%7D%0A%0Athis.Pin%20%3D%20function()%7B%0A%09let%20x%20%3D%20document.getElementById(%27PinArea%27)%0A%09if(!x)%20%7B%20%0A%09%09x%20%3D%20document.createElement(%27div%27)%3B%0A%09%09x.id%20%3D%20%27PinArea%27%3B%20x.style.position%20%3D%20%27fixed%27%3B%20%0A%09%09x.style.top%20%3D%20%27100%25%27%3B%20x.style.left%20%3D%20%270%25%27%3B%0A%09%09x.style.height%20%3D%20%27fit-content%27%3B%09x.style.width%20%3D%20%27fit-content%27%3B%0A%09%09x.style.transform%20%3D%20%27translate(0%25%2C%20-100%25)%27%3B%0A%09%09x.style.zIndex%20%3D%20%2710002%27%3B%0A%09%09document.querySelector(%27body%27).prepend(x)%3B%0A%09%7D%0A%09if%20(this.controller.pinned%20%3D%3D%20false%20%7C%7C%20this.controller.pinned%20%3D%3D%20undefined)%20%7B%20%0A%09%09this.controller.pinned%20%3D%20true%3B%0A%09%09this.HTMLElement.removeEventListener(%27mouseenter%27%2C%20this.OpenController)%3B%0A%09%09this.HTMLElement.removeEventListener(%27mouseleave%27%2C%20this.CloseController)%3B%0A%09%09try%20%7B%20this.ctxGifEmulator.canvas.removeEventListener(%27mouseenter%27%2C%20this.OpenController)%3B%0A%09%09this.ctxGifEmulator.canvas.removeEventListener(%27mouseleave%27%2C%20this.CloseController)%3B%20%7D%20catch(e)%20%7B%7D%0A%09%09this.controller.removeEventListener(%27mouseenter%27%2C%20this.OpenController)%3B%0A%09%09this.controller.removeEventListener(%27mouseleave%27%2C%20this.CloseController)%3B%0A%09%09this.controller.style.position%20%3D%20%27static%27%3B%0A%09%09this.controller.style.display%20%3D%20%27inline-block%27%3B%0A%09%09this.controller.style.width%20%3D%20%27fit-content%27%3B%0A%09%09document.getElementById(%27PinArea%27).prepend(this.controller)%3B%0A%09%7D%0A%09else%20%7B%20%0A%09%09this.controller.pinned%20%3D%20false%3B%0A%09%09this.HTMLElement.addEventListener(%27mouseenter%27%2C%20this.OpenController)%3B%0A%09%09this.HTMLElement.addEventListener(%27mouseleave%27%2C%20this.CloseController)%3B%0A%09%09try%20%7B%20this.ctxGifEmulator.canvas.addEventListener(%27mouseenter%27%2C%20this.OpenController)%3B%0A%09%09this.ctxGifEmulator.canvas.addEventListener(%27mouseleave%27%2C%20this.CloseController)%3B%20%20%7D%20catch(e)%20%7B%7D%0A%09%09this.controller.addEventListener(%27mouseenter%27%2C%20this.OpenController)%3B%0A%09%09this.controller.addEventListener(%27mouseleave%27%2C%20this.CloseController)%3B%0A%09%09this.controller.style.position%20%3D%20%27absolute%27%3B%0A%09%09this.controller.style.display%20%3D%20%27%27%3B%0A%09%09this.controller.style.width%20%3D%20%27%27%3B%0A%09%09document.querySelector(%27body%27).prepend(this.controller)%3B%0A%09%7D%0A%7D%0A%0A%2F%2F%0A%2F%2F%20IFrame%0A%2F%2F%0A%0Athis.IframePath%20%3D%20function()%20%7B%0A%09let%20x%20%3D%20this.FramesJS_OverlaySystem(selfReference.HTMLElement%2Ctrue%2C%27FrameJS-iFrameRedirect%27%2C%27%27%2C%27.FrameJS-iFrameRedirect%20%7B%20transition%3A0.2s%3B%20background-color%3A%20rgba(0%2C0%2C0%2C0.8)%3B%20color%3A%20white%3B%20%7D%27)%3B%0A%09x.overlayList%5B0%5D.overlay.innerHTML%20%3D%20%60%0A%3Cdiv%20style%3D%27padding%3A%201ex%27%3E%3Cbutton%20%3E%20X%20%3C%2Fbutton%3E%3Cbr%3E%3Cspan%3EiFrame%20detected%3A%3C%2Fspan%3E%3Cbr%3E%3Cspan%3EScripts%20cant%20reach%20inside%20iFrames%2C%20try%20opening%20the%20source%20and%20use%20the%20script%20there.%3C%2Fspan%3E%3Cbr%3E%3Cspan%3EBecause%20it%27s%20a%20link%2C%20be%20sure%20it%27s%20safe.%3C%2Fspan%3E%3Cbr%3E%3Ca%20target%3D%27_blank%27%20href%3D%24%7Bx.overlayList%5B0%5D.element.src%7D%3ESource%3A%20%24%7Bx.overlayList%5B0%5D.element.src.slice(0%2C75)%7D%3C%2Fa%3E%20%3C%2Fdiv%3E%0A%60%0A%09x.overlayList%5B0%5D.overlay.querySelectorAll(%27button%27)%5B0%5D.addEventListener(%27click%27%2Cfunction()%20%7B%20clearInterval(x.intervalId)%3B%20this.parentNode.parentNode.remove()%3B%20selfReference.Kill()%3B%20%7D%20)%3B%0A%7D%0A%0A%2F%2F%0A%2F%2F%20Video%0A%2F%2F%0A%0Athis.VideoPath%20%3D%20function()%20%7B%0A%09this.createDefaultVideoController()%0A%09this.frameDisplayIntervalId%20%3D%20setInterval(%20function()%20%7B%20selfReference.currentFrameDisplay.innerHTML%20%3D%20selfReference.GetCurrentFrame()%3B%20%20selfReference.totalFramesDisplay.innerHTML%20%3D%20selfReference.GetTotalFrames()%3B%20%7D%2C%201)%3B%0A%7D%0A%0Athis.createDefaultVideoController%20%3D%20function()%7B%0A%09let%20x%20%3D%20this.FramesJS_OverlaySystem(this.HTMLElement%2Cfalse%2C%27FrameJS-DefaultVideoController%27%2C%27%27%2C%27.FrameJS-DefaultVideoController%20%7B%20transition%3A0.2s%3B%20background-color%3A%20rgba(0%2C0%2C0%2C0.5)%3B%20color%3A%20white%3B%20transition%3A%200.2s%3B%20z-index%3A10001%7D%27)%3B%0A%09this.controller%20%3D%20%20x.overlayList%5B0%5D.overlay%3B%0A%09this.controller.innerHTML%20%3D%20%60%0A%3Cdiv%20style%3D%27padding%3A1ex%27%3E%0A%3Cbutton%3EKill%3C%2Fbutton%3E%0A%3Cbutton%3E%2F%2F%2F%3C%2Fbutton%3E%0A%3Cbutton%3E%5E%3C%2Fbutton%3E%0A%3Cbutton%3Esource%3C%2Fbutton%3E%3Cbr%3E%0A%3Cbutton%3E%3C%3C%3C%3C%2Fbutton%3E%0A%3Cbutton%3E%3C%3C%3C%2Fbutton%3E%0A%3Cbutton%3E%3C%3C%2Fbutton%3E%0A%3Cbutton%3E%3E%3C%2Fbutton%3E%0A%3Cbutton%3E%3E%3E%3C%2Fbutton%3E%0A%3Cbutton%3E%3E%3E%3E%3C%2Fbutton%3E%3Cbr%3E%0A%3Cbutton%3E-1%20sec%3C%2Fbutton%3E%0A%3Cbutton%3E%2B1%20sec%3C%2Fbutton%3E%20%0A%3Cbutton%3Eplay%2Fpause%3C%2Fbutton%3E%20%3Cbr%3E%0A%3Cinput%20type%3D%27number%27%20min%3D%270%27%20max%3D%27120%27%20value%3D%2724%27%20%3E%3C%2Finput%3E%20FPS%3Cbr%3E%0Ago-to%20%3Cinput%20min%3D%270%27%20type%3D%27number%27%3E%3C%2Finput%3E%3Cbr%3E%0A%3Cinput%20type%3D%27number%27%20min%3D%270%27%20step%3D%270.25%27%20max%3D%2710%27%20value%3D%271%27%20%3E%3C%2Finput%3E%20Speed%3Cbr%3E%0A%3Cinput%20type%3D%27checkbox%27%3Eloop%3F%3C%2Fbutton%3E%0A%3Cinput%20type%3D%27checkbox%27%3Econtrols%3F%3C%2Fbutton%3E%3Cbr%3E%0A%3Cspan%20class%3D%27DefaultCurrentFrameDisplay%27%3E%3C%2Fspan%3E%20%2F%20%20%3Cspan%20class%3D%27DefaultTotalFramesDisplay%27%3E%3C%2Fspan%3E%0A%3C%2Fdiv%3E%60%0A%09this.controller.querySelectorAll(%27button%27)%5B0%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.Kill()%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B1%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.SeeTrough()%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B2%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.Pin()%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B3%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.OpenSource()%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B4%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.NudgeVideo(-3)%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B5%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.NudgeVideo(-2)%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B6%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.NudgeVideo(-1)%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B7%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.NudgeVideo(1)%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B8%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.NudgeVideo(2)%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B9%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.NudgeVideo(3)%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B10%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.Skip(-1)%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B11%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.Skip(1)%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B12%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.PlayPauseVideo()%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27input%27)%5B0%5D.addEventListener(%27change%27%2C%20function()%20%7B%20selfReference.ChangeFps(this)%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27input%27)%5B1%5D.addEventListener(%27change%27%2C%20function()%20%7B%20selfReference.GoToFrameVideo(this)%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27input%27)%5B2%5D.addEventListener(%27change%27%2C%20function()%20%7B%20selfReference.ChangeSpeed(this)%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27input%27)%5B3%5D.addEventListener(%27change%27%2C%20function()%20%7B%20selfReference.Loop(this)%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27input%27)%5B4%5D.addEventListener(%27change%27%2C%20function()%20%7B%20selfReference.ToggleControls(this)%3B%20%7D%20)%3B%0A%09this.HTMLElement.addEventListener(%27mouseenter%27%2C%20selfReference.OpenController)%3B%0A%09this.HTMLElement.addEventListener(%27mouseleave%27%2C%20selfReference.CloseController)%3B%0A%09this.controller.addEventListener(%27mouseenter%27%2C%20selfReference.OpenController)%3B%0A%09this.controller.addEventListener(%27mouseleave%27%2C%20selfReference.CloseController)%3B%0A%09this.controllerIntervalId%20%3D%20x.intervalId%3B%0A%09this.currentFrameDisplay%20%3D%20selfReference.controller.querySelector(%27.DefaultCurrentFrameDisplay%27)%3B%20%0A%09this.totalFramesDisplay%20%3D%20selfReference.controller.querySelector(%27.DefaultTotalFramesDisplay%27)%3B%0A%7D%0A%0Athis.GetTotalFrames%20%3D%20function()%20%7B%20return%20this.currentFrame%20%3D%20Math.round(this.HTMLElement.duration%20*%20this.fps)%20%7D%0Athis.GetCurrentFrame%20%3D%20function()%20%7B%20return%20this.totalFrames%20%3D%20Math.round(this.HTMLElement.currentTime%20*%20this.fps)%20%7D%0A%0Athis.NudgeVideo%20%3D%20function(ammountFrame)%7B%0A%09%09this.HTMLElement.pause()%3B%0A%09%09this.HTMLElement.currentTime%20%2B%3D%20ammountFrame%2Fthis.fps%3B%0A%7D%0Athis.Skip%20%3D%20function(seconds)%7B%0A%09%09this.HTMLElement.currentTime%20%2B%3D%20this.HTMLElement.playbackRate*seconds%3B%0A%7D%0Athis.GoToFrameVideo%20%3D%20function(frame)%7B%0A%09frame%20%3D%20Math.min(frame.value%2C%20this.GetTotalFrames())%3B%0A%09frame%20%3D%20Math.max(frame%2C%200)%3B%0A%09this.HTMLElement.currentTime%20%3D%20frame%20%2F%20this.fps%0A%7D%0Athis.PlayPauseVideo%20%3D%20function()%7B%0A%09if(!this.HTMLElement.paused)%20%7Bthis.HTMLElement.pause()%3B%20return%3B%7D%0A%09this.HTMLElement.play()%3B%0A%7D%0Athis.ChangeFps%20%3D%20function(input)%7B%0A%09this.fps%20%3D%20input.value%3B%0A%7D%0Athis.ChangeSpeed%20%3D%20function(input)%7B%0A%09if%20(%20input.value%20%3C%3D%200%20)%20%7B%20this.HTMLElement.playbackRate%20%3D%200.1%3B%20return%3B%20%7D%3B%20this.HTMLElement.playbackRate%20%3D%20input.value%3B%0A%7D%0Athis.Loop%20%3D%20function(input)%7B%0A%09if(this.HTMLElement.ended)%20%7Bthis.HTMLElement.play()%7D%3B%20this.HTMLElement.loop%20%3D%20input.checked%3B%0A%7D%0Athis.ToggleControls%20%3D%20function(input)%7B%0A%09this.HTMLElement.controls%20%3D%20input.checked%3B%0A%7D%0A%0A%2F%2F%0A%2F%2F%20Gif%0A%2F%2F%0A%0Athis.ImagePath%20%3D%20function()%20%7B%0A%09%2F%2F%20first%3A%20check%20if%20its%20a%20gif.%0A%09if(this.HTMLElement.src.split(%27%3B%27)%5B0%5D%20%3D%3D%20%27data%3Aimage%2Fgif%27)%20%7Bsetup(this.HTMLElement.src)%7D%0A%09else%20%7B%0A%09%09var%20xhr%20%3D%20new%20XMLHttpRequest()%3B%0A%09%09xhr.onload%20%3D%20function()%20%7B%0A%09%09%09const%20reader%20%3D%20new%20FileReader()%3B%0A%09%09%09reader.onload%20%3D%20(function(elem)%20%7B%20return%20function(e)%20%7B%20%0A%09%09%09%09if(e.target.result.split(%27%3B%27)%5B0%5D%20!%3D%20%27data%3Aimage%2Fgif%27)%20%7B%0A%09%09%09%09%09let%20x%20%3D%20selfReference.FramesJS_OverlaySystem(selfReference.HTMLElement%2Ctrue%2C%27FrameJS-iFrameRedirect%27%2C%27%27%2C%27.FrameJS-iFrameRedirect%20%7B%20transition%3A0.2s%3B%20background-color%3A%20rgba(0%2C0%2C0%2C0.8)%3B%20color%3A%20white%3B%20%7D%27)%3B%0A%09%09%09%09%09x.overlayList%5B0%5D.overlay.innerHTML%20%3D%20%60%0A%3Cdiv%20style%3D%27padding%3A%201ex%27%3E%3Cbutton%3E%20X%20%3C%2Fbutton%3E%3Cbr%3E%3Cspan%3ENot%20a%20gif%3A%20%24%7Be.target.result.split(%27%3B%27)%5B0%5D%7D%3C%2Fspan%3E%3C%2Fdiv%3E%0A%09%60%0A%09%09%09%09x.overlayList%5B0%5D.overlay.querySelectorAll(%27button%27)%5B0%5D.addEventListener(%27click%27%2Cfunction()%20%7B%20clearInterval(x.intervalId)%3B%20this.parentNode.parentNode.remove()%3B%20selfReference.Kill()%3B%20%7D%20)%3B%0A%09%09%09%09%09return%3B%20%0A%09%09%09%09%7D%0A%09%09%09setup(e.target.result)%0A%09%09%09%7D%3B%20%7D)()%3B%0A%09%09%09reader.readAsDataURL(xhr.response)%3B%0A%09%09%7D%3B%0A%09%09xhr.onerror%20%3D%20function()%20%7B%0A%09%09%09let%20x%20%3D%20selfReference.FramesJS_OverlaySystem(selfReference.HTMLElement%2Ctrue%2C%27FrameJS-iFrameRedirect%27%2C%27%27%2C%27.FrameJS-iFrameRedirect%20%7B%20transition%3A0.2s%3B%20background-color%3A%20rgba(0%2C0%2C0%2C0.8)%3B%20color%3A%20white%3B%20%7D%27)%3B%0A%09%09%09x.overlayList%5B0%5D.overlay.innerHTML%20%3D%20%60%0A%3Cdiv%20style%3D%27padding%3A%201ex%27%3E%3Cbutton%3E%20X%20%3C%2Fbutton%3E%3Cbr%3E%3Cspan%3EAccess%20to%20resource%20failed.%3C%2Fspan%3E%3Cbr%3E%3Cspan%3ETry%20opening%20the%20source%20and%20use%20the%20script%20there.%3C%2Fspan%3E%3Cbr%3E%3Ca%20target%3D%27_blank%27%20href%3D%27%24%7Bx.overlayList%5B0%5D.element.src%7D%27%3ESource%3A%20%24%7Bx.overlayList%5B0%5D.element.src.slice(0%2C75)%2B%27...%27%7D%3C%2Fa%3E%3Cbr%3E%20%3C%2Fdiv%3E%0A%60%0A%09%09x.overlayList%5B0%5D.overlay.querySelectorAll(%27button%27)%5B0%5D.addEventListener(%27click%27%2Cfunction()%20%7B%20clearInterval(x.intervalId)%3B%20this.parentNode.parentNode.remove()%3B%20%20selfReference.Kill()%3B%20%7D%20)%3B%0A%09%09%7D%0A%09%09xhr.open(%27GET%27%2C%20this.HTMLElement.src)%3B%0A%09%09xhr.responseType%20%3D%20%27blob%27%3B%0A%09%09xhr.send()%3B%0A%09%7D%0A%09%0A%09%2F%2F%20second%3A%20create%20a%20canvas%2C%20with%20width%20and%20height%20of%20the%20image.%20as%20overlay%0A%09async%20function%20setup(dataUrl)%7B%0A%09%09selfReference.isEmulatorPreparing%20%3D%20true%3B%0A%09%09let%20x%20%3D%20selfReference.FramesJS_OverlaySystem(selfReference.HTMLElement%2Ctrue%2C%27FrameJS-GifEmulator%27%2C%27%3Cdiv%20style%3D%5C%27position%3A%20absolute%3B%20background-color%3A%20rgba(0%2C0%2C0%2C0.5)%3B%20width%3A100%25%3B%20height%3A100%25%3B%5C%27%3E%3Cdiv%20style%3D%5C%27padding%3A1ex%3B%20text-align%3A%20center%3B%20position%3Aabsolute%3B%20top%3A50%25%3B%20left%3A50%25%3B%20transform%3Atranslate(-50%25%2C%20-50%25)%5C%27%3B%3E%3Cb%3E%E2%80%A6Caching%E2%80%A6%3C%2Fb%3E%3Cbr%3E%3Cspan%3Ex%20%2F%20x%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2Fdiv%3E%3Ccanvas%20style%3D%5C%27width%3A100%25%3B%20height%3A100%25%3B%5C%27%3E%3C%2Fcanvas%3E%27%2C%27.FrameJS-GifEmulator%20%7B%20transition%3A0.2s%3B%20background-color%3A%20rgba(0%2C0%2C0%2C0.0)%3B%20color%3A%20white%3B%20%7D%20%27)%3B%0A%09%09let%20c%20%3D%20x.overlayList%5B0%5D.overlay.querySelector(%27canvas%27)%3B%0A%09%09selfReference.gifEmulatorIntervalId%20%3D%20x.intervalId%3B%0A%09%09selfReference.ctxGifEmulator%20%3D%20c.getContext(%272d%27)%3B%0A%09%09c.width%20%3D%20selfReference.HTMLElement.naturalWidth%3B%20c.height%20%3D%20selfReference.HTMLElement.naturalHeight%3B%0A%09%09await%20sleep(0)%3B%0A%09%09%0A%09%09const%20t0%20%3D%20performance.now()%3B%0A%09%09%0A%09%09%2F%2F%20third%20%3A%20suffer%2C%20extract%20infos%20of%20each%20frame%2C%20meaning%20readng%20every%20block%2C%20saving%20in%20default%20the%20ones%20in%20the%20header%2C%20then%20a%20loop%20of%3A%0A%09%09%2F%2F%20read%20image%20data%20block%2C%20override%20infos%20if%20must%2C%20skip%20any%20useless%20extension%20block%2C%20LZW%20decompress%20the%20bits%2C%20draw%20the%20fuc*er%2C%20save%20it%20in%20selfReference.frameList%20using%20the%20canvas%20toDataUrl%3B%0A%09%09dataURL%20%3D%20atob(dataUrl.split(%27%2C%27)%5B1%5D)%3B%0A%09%09let%20gifBytes%20%3D%20new%20Array(dataURL.length)%3B%0A%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20dataURL.length%3B%20i%2B%2B)%20%7B%20gifBytes%5Bi%5D%20%3D%20dataURL.charCodeAt(i)%3B%20%7D%20%0A%09%09let%20gifBlocks%20%3D%20GetGifBlocks(gifBytes)%3B%20%2F%2F%20separeted%20in%20%5B0%5D%20header%20-%3E%20%5B...%5D%20all%20frames%20-%3E%20%5Bn-1%5D%20trailer%0A%09%09selfReference.HTMLElement.style.visibility%20%3D%20%27hidden%27%3B%0A%09%09x.overlayList%5B0%5D.overlay.querySelector(%27span%27).innerHTML%20%3D%200%20%2B%20%27%20%2F%20%27%20%2B%20(gifBlocks.length-3)%3B%20%2F%2F%20-3%20because%20ignore%20header%20and%20trailer%0A%09%09%2F%2F%20now%20we%20have%20all%20blocks%2C%20time%20to%20gather%20infos%2Cdraw%20%27em%2C%20save%20%27em%20(in%20selfReference.frameList%3B%20to%20then%20start%20emulator%0A%09%09%0A%09%09for(let%20i%20%3D%201%3B%20i%20%3C%20gifBlocks.length-1%3B%20i%2B%2B)%7B%0A%09%09%09if(!selfReference.isEmulatorPreparing)%20%7Breturn%3B%7D%0A%09%09%09x.overlayList%5B0%5D.overlay.querySelector(%27span%27).innerHTML%20%3D%20i-1%20%2B%20%27%20%2F%20%27%20%2B%20(gifBlocks.length-3)%3B%0A%09%09%09await%20BuildFrame(gifBlocks%2C%20i%2C%20selfReference.ctxGifEmulator)%3B%0A%09%09%7D%0A%09%09%0A%09%09const%20t1%20%3D%20performance.now()%3B%0A%09%09console.log(%60%5BFramesJS%5D%20The%20Gif%20took%20%24%7Bt1%20-%20t0%7D%20milliseconds%20to%20prepare.%60)%3B%0A%09%09%0A%09%09x.overlayList%5B0%5D.overlay.querySelector(%27div%27).remove()%3B%0A%09%09StartEmulator()%0A%09%09selfReference.createDefaultGifEmulatorController()%3B%0A%09%09selfReference.frameDisplayIntervalId%20%3D%20setInterval(%20function()%20%7B%20selfReference.currentFrameDisplay.innerHTML%20%3D%20selfReference.currentFrame%3B%20%20selfReference.totalFramesDisplay.innerHTML%20%3D%20selfReference.frameList.length-1%3B%20%7D%2C%201)%3B%0A%09%7D%0A%09%0A%09async%20function%20StartEmulator()%7B%0A%09%09selfReference.isEmulatorReady%20%3D%20true%3B%0A%09%09selfReference.currentFrame%20%3D%200%0A%09%09while(1)%7B%0A%09%09%09if(!selfReference.isEmulatorReady)%20%7Breturn%3B%7D%0A%09%09%09selfReference.DrawCurrentFrame()%3B%0A%09%09%09if(!selfReference.isPaused)%20%7B%20await%20sleep(selfReference.frameList%5BselfReference.currentFrame%5D.delay%20%3C%3D%201%20%3F%20100%20%3A%20selfReference.frameList%5BselfReference.currentFrame%5D.delay*10)%3B%20selfReference.currentFrame%2B%2B%3B%20%7D%0A%09%09%09else%20%7B%20await%20sleep(1)%3B%20%7D%0A%09%09%7D%0A%09%7D%0A%09%0A%09async%20function%20BuildFrame(gifBlocks%2C%20frameNumber%2C%20ctx)%20%7B%0A%09%09%0A%09%09%2F%2F%20all%20informations%20needed%20for%20emulating%20gif%0A%09%09let%20frameData%20%3D%20%7B%0A%09%09%09HTMLImageElement%3A%20document.createElement(%27img%27)%2C%0A%09%09%09disposalMethod%3A%200%2C%0A%09%09%09delay%3A%200%2C%0A%09%09%7D%3B%0A%09%09%0A%09%09%2F%2F%20header%20infos%0A%09%09let%20header%20%3D%20gifBlocks%5B0%5D%0A%09%09let%20backgroundColorIndex%20%3D%20header%5B1%5D%5B5%5D%3B%0A%09%09let%20colorTable%20%3D%20header%5B2%5D%3B%0A%09%09%0A%09%09%2F%2Flet%27s%20trim%20useless%20infos.%20(and%20replace%20with%20local%20color%20table%20if%20needed)%0A%09%09let%20frameBlock%20%3D%20gifBlocks%5BframeNumber%5D%0A%09%09let%20frameBlock_GraphicControlExtension%20%3D%200%3B%0A%09%09let%20frameBlock_ImageDescriptor%20%3D%200%3B%0A%09%09let%20frameBlock_ImageData%20%3D%200%3B%0A%09%09for(let%20i%20%3D%200%3B%20i%20%3C%20gifBlocks%5BframeNumber%5D.length%3B%20i%2B%2B)%20%7B%0A%09%09%09if(frameBlock%5Bi%5D%5B0%5D%20%3D%3D%2044)%20%7B%0A%09%09%09%09frameBlock_ImageDescriptor%20%3D%20frameBlock%5Bi%5D%3B%20%20%2F%2F%20image%20descriptor%0A%09%09%09%09if(frameBlock_ImageDescriptor%5B9%5D%20%3E%3E%207)%20%7B%20colorTable%20%3D%20frameBlock%5Bi%2B1%5D%3B%20i%2B%2B%20%7D%20%2F%2F%20local%20color%20table%0A%09%09%09%7D%20%0A%09%09%09else%20if(frameBlock%5Bi%5D%5B0%5D%20%3D%3D%2033%20)%20%7B%20%0A%09%09%09%09if(frameBlock%5Bi%5D%5B1%5D%20%3D%3D%20249)%20%7B%20frameBlock_GraphicControlExtension%20%3D%20frameBlock%5Bi%5D%3B%20%7D%20%2F%2F%20graphic%20control%20extension%0A%09%09%09%09continue%3B%20%2F%2F%20any%20other%20type%20of%20extension%20(%20ignore%20)%0A%09%09%09%7D%20%0A%09%09%09else%20%7B%20frameBlock_ImageData%20%3D%20frameBlock%5Bi%5D%3B%20break%7D%20%2F%2F%20image%20data%0A%09%09%7D%0A%09%09if(!frameBlock_GraphicControlExtension)%7B%20frameBlock_GraphicControlExtension%20%3D%20%5B33%2C249%2C4%2C0%2C0%2C0%2C0%2C0%5D%3B%20%7D%0A%09%09%0A%09%09%2F%2F%20color%20table%20data%0A%09%09let%20temp%20%3D%20%5B%5D%3B%0A%09%09for(let%20i%20%3D%200%3B%20i%20%3C%20colorTable.length%3B%20i%2B%3D3)%20%7B%20temp.push(%5BcolorTable%5Bi%5D%2CcolorTable%5Bi%2B1%5D%2CcolorTable%5Bi%2B2%5D%5D)%3B%20%7D%0A%09%09colorTable%20%3D%20temp%3B%0A%09%09%0A%09%09%2F%2F%20graphic%20control%20data%0A%09%09frameData.delay%20%3D%20(frameBlock_GraphicControlExtension%5B4%5D%20%2B%20frameBlock_GraphicControlExtension%5B5%5D*256)%3B%0A%09%09let%09transparentColorIndex%20%3D%20frameBlock_GraphicControlExtension%5B3%5D%20%26%201%20%3F%20frameBlock_GraphicControlExtension%5B6%5D%20%3A%20-1%3B%0A%09%09frameData.disposalMethod%20%3D%20frameBlock_GraphicControlExtension%5B3%5D%20%3E%3E%202%20%26%207%20%0A%09%09%0A%09%09%2F%2F%20Image%20descriptor%20data%0A%09%09let%20imageLeft%20%3D%20frameBlock_ImageDescriptor%5B1%5D%20%2B%20frameBlock_ImageDescriptor%5B2%5D*256%3B%0A%09%09let%20imageTop%20%3D%20frameBlock_ImageDescriptor%5B3%5D%20%2B%20frameBlock_ImageDescriptor%5B4%5D*256%3B%0A%09%09let%20imageWidth%20%3D%20frameBlock_ImageDescriptor%5B5%5D%20%2B%20frameBlock_ImageDescriptor%5B6%5D*256%3B%0A%09%09let%20imageHeight%20%3D%20frameBlock_ImageDescriptor%5B7%5D%20%2B%20frameBlock_ImageDescriptor%5B8%5D*256%3B%0A%09%09let%20interlaceFlag%20%3D%20frameBlock_ImageDescriptor%5B9%5D%20%3E%3E%206%20%26%201%3B%0A%09%09%0A%09%09%2F%2F%20turning%20image%20data%20into%20a%20bit%20stream%0A%09%09var%20lzwMinCode%20%3D%20frameBlock_ImageData%5B0%5D%3B%0A%09%09var%20bitStream%20%3D%20%27%27%0A%09%09let%20s%20%3D%201%3B%0A%09%09for(let%20i%20%3D%201%3B%20i%20%3C%20frameBlock_ImageData.length%3B%20i%2B%2B)%20%7B%0A%09%09%09if(i!%3Ds)%20%7B%20bitStream%20%3D%20(%27000000000%27%20%2B%20%20frameBlock_ImageData%5Bi%5D.toString(2)).substr(-8)%20%2B%20bitStream%20%7D%0A%09%09%09else%7Bs%20%2B%3D%20frameBlock_ImageData%5Bi%5D%2B1%3B%20%7D%0A%09%09%7D%0A%09%09%0A%09%09%2F%2F%20LZW%20decode%0A%09%09var%20CODE%20%3D%200%3B%0A%09%09var%20PREV_CODE%20%3D%200%3B%0A%09%09var%20K%20%3D%200%3B%0A%09%09var%20INDEX_STREAM%20%3D%20%5B%5D%3B%0A%09%09var%20CODE_TABLE%20%3D%20%5B%5D%3B%0A%09%09var%20CODE_SIZE%20%3D%20lzwMinCode%2B1%3B%0A%09%09%0A%09%09function%20GetCode()%20%7B%0A%09%09%09CODE%20%3D%20parseInt(bitStream.slice(0-CODE_SIZE)%2C2)%0A%09%09%09bitStream%20%3D%20bitStream.slice(0%2C0-CODE_SIZE)%3B%0A%09%09%7D%0A%09%09%0A%09%09%2F%2F%20init%20CODE_TABLE%0A%09%09for(let%20i%20%3D%200%3B%20i%20%3C%201%3C%3ClzwMinCode%3B%20i%2B%2B)%7BCODE_TABLE.push(%5Bi%5D)%3B%7D%0A%09%09CODE_TABLE.push(%5B%27clear%20code%27%5D%2C%5B%27end-of-information%20code%27%5D)%0A%09%09%2F%2F%20init%0A%09%09GetCode()%3B%20GetCode()%3B%20%2F%2F%20let%20CODE%20be%20the%20first%20code%20in%20the%20code%20stream%20(skip%204)%0A%09%09INDEX_STREAM.push(...CODE_TABLE%5BCODE%5D)%3B%20%2F%2F%20output%20%7BCODE%7D%20to%20index%20stream%0A%09%09while(1)%7B%0A%09%09%09PREV_CODE%20%3D%20CODE%3B%0A%09%09%09GetCode()%3B%0A%09%09%09if(CODE_TABLE%5BCODE%5D%20%3D%3D%20%27clear%20code%27)%20%7B%20%2F%2F%20clear%20code%0A%09%09%09%09CODE_SIZE%20%3D%20lzwMinCode%2B1%3B%20%20%2F%2F%20reset%20code%20length%0A%09%09%09%09CODE_TABLE%20%3D%20CODE_TABLE.splice(0%2C(1%3C%3ClzwMinCode)%2B2)%3B%20%2F%2F%20clear%20code%20table%20%0A%09%09%09%09GetCode()%3B%20%2F%2F%20we%20are%20simulating%20an%20init.%0A%09%09%09%09INDEX_STREAM.push(...CODE_TABLE%5BCODE%5D)%3B%0A%09%09%09%09continue%3B%0A%09%09%09%7D%0A%09%09%09if(CODE_TABLE%5BCODE%5D%20%3D%3D%20%27end-of-information%20code%27)%7Bbreak%3B%7D%20%2F%2F%20end%20of%20information%20code%0A%09%09%09if(CODE_TABLE%5BCODE%5D%20!%3D%20undefined)%20%7B%20%2F%2F%20found%0A%09%09%09%09INDEX_STREAM.push(...CODE_TABLE%5BCODE%5D)%3B%20%2F%2F%20output%20%7BCODE%7D%20to%20index%20stream%0A%09%09%09%09K%20%3D%20CODE_TABLE%5BCODE%5D%5B0%5D%3B%20%2F%2F%20let%20K%20be%20the%20first%20index%20in%20%7BCODE%7D%0A%09%09%09%7D%20else%20%7B%20%2F%2F%20not%20found%0A%09%09%09%09K%20%3D%20CODE_TABLE%5BPREV_CODE%5D%5B0%5D%3B%20%2F%2F%20let%20K%20be%20the%20first%20index%20in%20%7BCODE-1%7D%0A%09%09%09%09INDEX_STREAM.push(...CODE_TABLE%5BPREV_CODE%5D.concat(K))%3B%20%2F%2F%20output%20%7BCODE-1%7D%2BK%20to%20index%20stream%0A%09%09%09%7D%0A%09%09%09CODE_TABLE.push(CODE_TABLE%5BPREV_CODE%5D.concat(K))%3B%20%2F%2F%20add%20%7BCODE-1%7D%2BK%20to%20code%20table%0A%09%09%09if%20(CODE_TABLE.length%20%3D%3D%20(1%20%3C%3C%20CODE_SIZE)%20%26%26%20CODE_SIZE%20%3C%2012)%20%7B%20CODE_SIZE%2B%2B%20%7D%0A%09%09%7D%0A%09%09%0A%09%09%2F%2F%20we%20now%20have%20an%20index%20stream!%0A%09%09%0A%09%09%2F%2F%20fix%20interlace%0A%09%09if(interlaceFlag)%20%7B%0A%09%09%09INDEX_STREAM_ROWS%20%3D%20%5B%5D%3B%0A%09%09%09while(INDEX_STREAM.length%20!%3D%200)%7B%0A%09%09%09%09INDEX_STREAM_ROWS.push(INDEX_STREAM.slice(0%2CimageWidth))%3B%20%0A%09%09%09%09INDEX_STREAM%20%3D%20INDEX_STREAM.slice(imageWidth)%3B%0A%09%09%09%7D%0A%09%09%09%2F%2Fdebugger%0A%09%09%09let%20step%20%3D%200%3B%0A%09%09%09%2F%2F%20pass%201%0A%09%09%09for(let%20i%20%3D%200%3B%20i%20%3C%20imageHeight%3B%20i%2B%3D8)%20%7B%20INDEX_STREAM%5Bi%5D%20%3D%20INDEX_STREAM_ROWS%5Bstep%2B%2B%5D%20%7D%0A%09%09%09%2F%2F%20pass%202%0A%09%09%09for(let%20i%20%3D%204%3B%20i%20%3C%20imageHeight%3B%20i%2B%3D8)%20%7B%20INDEX_STREAM%5Bi%5D%20%3D%20INDEX_STREAM_ROWS%5Bstep%2B%2B%5D%20%7D%0A%09%09%09%2F%2F%20pass%203%0A%09%09%09for(let%20i%20%3D%202%3B%20i%20%3C%20imageHeight%3B%20i%2B%3D4)%20%7B%20INDEX_STREAM%5Bi%5D%20%3D%20INDEX_STREAM_ROWS%5Bstep%2B%2B%5D%20%7D%0A%09%09%09%2F%2F%20pass%204%0A%09%09%09for(let%20i%20%3D%201%3B%20i%20%3C%20imageHeight%3B%20i%2B%3D2)%20%7B%20INDEX_STREAM%5Bi%5D%20%3D%20INDEX_STREAM_ROWS%5Bstep%2B%2B%5D%20%7D%0A%09%09%09INDEX_STREAM%20%3D%20%5B%5D.concat(...INDEX_STREAM)%0A%09%09%7D%0A%09%09%0A%09%09%2F%2F%20pixel%20stream%20will%20aready%20be%20built%20in%20accordance%20to%20the%20interlace%20flag.%0A%09%09let%20pixelStream%20%3D%20%5B%5D%3B%20%2F%2F%20%5B%5Br%2Cg%2Cb%2Ca%5D%2C%5Br%2Cg%2Cb%2Ca%5D%2C%5Br%2Cg%2Cb%2Ca%5D%2C...%5D%3B%0A%09%09%0A%09%09%2F%2F%20deal%20with%20trasparency%0A%09%09if(transparentColorIndex%20%3D%3D%20-1)%20%7B%0A%09%09%09for(let%20i%20%3D%200%3B%20i%20%3C%20INDEX_STREAM.length%3B%20i%2B%2B)%7B%0A%09%09%09%09pixelStream%5Bi%5D%20%3D%20%27rgba(%27%2BcolorTable%5BINDEX_STREAM%5Bi%5D%5D.join(%27%2C%27)%2B%27)%27%3B%0A%09%09%09%7D%0A%09%09%7D%20else%20%7B%0A%09%09%09for(let%20i%20%3D%200%3B%20i%20%3C%20INDEX_STREAM.length%3B%20i%2B%2B)%7B%0A%09%09%09%09pixelStream%5Bi%5D%20%3D%20%27rgba(%27%2BcolorTable%5BINDEX_STREAM%5Bi%5D%5D.join(%27%2C%27)%2B%27%2C%27%2B(transparentColorIndex%20%3D%3D%20INDEX_STREAM%5Bi%5D%20%3F%200%20%3A%201)%2B%27)%27%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09%0A%09%09%2F%2F%20draw%20it!%0A%09%09let%20step%20%3D%200%3B%0A%09%09for(let%20y%20%3D%20imageTop%3B%20y%20%3C%20imageTop%20%2B%20imageHeight%3B%20y%2B%2B)%20%7B%0A%09%09%09for(let%20x%20%3D%20imageLeft%3B%20x%20%3C%20imageLeft%20%2B%20imageWidth%3B%20x%2B%2B)%20%7B%0A%09%09%09%09ctx.fillStyle%20%3D%20pixelStream%5Bstep%5D%3B%0A%09%09%09%09ctx.fillRect(%20x%2C%20y%2C%201%2C%201%20)%3B%0A%09%09%09%09step%2B%2B%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09frameData.HTMLImageElement.src%20%3D%20ctx.canvas.toDataURL()%3B%0A%09%09%0A%09%09%2F%2F%20disposal%20method%0A%09%09await%20sleep(0)%3B%0A%09%09%2F%2F%20thank%20you!%20https%3A%2F%2Fdocstore.mik.ua%2Forelly%2Fweb2%2Fwdesign%2Fch23_05.htm%0A%09%09%2F%2F%203%20%3D%20%27This%20option%20restores%20to%20the%20state%20of%20the%20previous%2C%20%5B%5B%5B%5B%5BUNDISPOSED%5D%5D%5D%5D%5D%20frame.%20For%20example%2C%20if%20you%20have%20a%20static%20background%20that%20is%20set%20to%20Do%20Not%20Dispose%2C%20that%20image%20will%20reappear%20in%20the%20areas%20left%20by%20a%20replaced%20frame.%20docstore.mik.ua%2Forelly%2Fweb2%2Fwdesign%2Fch23_05.htm%27%0A%09%09%2F%2F%201%20%3D%20dont%20clear%20canvas%2C%202%20%3D%20clear%20canvas%20to%20background%20color%20(note%20if%20backgroundColorIndex%20%3D%3D%20transparentColorIndex)%3B%0A%09%09if(frameData.disposalMethod%20%3D%3D%202%20)%20%7B%0A%09%09%09ctx.clearRect(0%2C%200%2C%20ctx.canvas.width%2C%20ctx.canvas.height)%3B%20%0A%09%09%7D%20else%20if%20(frameData.disposalMethod%20%3D%3D%203)%20%7B%0A%09%09%09for(let%20i%20%20%3D%20%20selfReference.frameList.length-1%3B%20i%20%3E%3D%200%3B%20i--)%7B%0A%09%09%09%09if(selfReference.frameList%5Bi%5D.disposalMethod%20!%3D%203%20%26%26%20selfReference.frameList%5Bi%5D.disposalMethod%20!%3D%202)%20%7B%20ctx.drawImage(selfReference.frameList%5Bi%5D.HTMLImageElement%2C%200%2C%200)%3B%20break%20%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%09selfReference.frameList.push(frameData)%3B%0A%09%09%0A%09%7D%0A%09%0A%09function%20GetGifBlocks(gifByteStream)%20%7B%0A%09%09%0A%09%09let%20blocks%20%3D%20%5B%5D%3B%0A%09%09let%20data%20%3D%20gifByteStream%3B%0A%09%09let%20lastByte%20%3D%200%3B%0A%09%09let%20block%20%3D%20%5B%5D%3B%0A%09%09let%20blockType%20%3D%200%3B%0A%09%09let%20blockSize%20%3D%200%3B%0A%09%09let%20tableSize%20%3D%200%3B%0A%09%09%0A%09%09%2F%2F%20header%2C%20from%200%20-%3E%205%0A%09%09blockSize%20%3D%206%3B%0A%09%09block.push(data.slice(lastByte%2ClastByte%2BblockSize))%3B%0A%09%09lastByte%20%2B%3D%20blockSize%3B%0A%09%09if(block%5B0%5D.slice(0%2C3).join(%27%2C%27)%20!%3D%20%5B%2071%2C73%2C70%20%5D.join(%27%2C%27))%20%7Bthrow%20%27%5BNot%20a%20gif%5D%27%7D%0A%09%09%2F%2F%20logical%20screen%20descriptor%2C%20from%206%20-%3E%2012%0A%09%09blockSize%20%3D%207%3B%0A%09%09block.push(data.slice(lastByte%2ClastByte%2BblockSize))%3B%0A%09%09lastByte%20%2B%3D%20blockSize%3B%0A%09%09%2F%2F%20global%20color%20table%0A%09%09tableSize%20%3D%20getColorTableBlockSize(data%2C%2011)%3B%0A%09%09if%20(tableSize%20%3E%200)%20%7B%20block.push(data.slice(lastByte%2ClastByte%2BtableSize))%3B%20lastByte%20%2B%3D%20tableSize%3B%20%20%7D%20%0A%09%09%2F%2F%20pushing%20header%20block%0A%09%09blocks.push(block)%3B%20%0A%09%09block%20%3D%20%5B%5D%3B%20%0A%09%09try%20%7B%0A%09%09while(1)%7B%0A%09%09%09blockType%20%3D%20getBlockType(data%2C%20lastByte)%3B%0A%09%09%09if(blockType%20%3D%3D%20%27Image%20Data%27)%7B%20%20%0A%09%09%09%09%2F%2F%20image%20data%0A%09%09%09%09blockSize%20%3D%20getBlockSize(data%2C%20lastByte%2C1)%3B%0A%09%09%09%09block.push(data.slice(lastByte%2ClastByte%2BblockSize))%3B%0A%09%09%09%09lastByte%20%2B%3D%20blockSize%3B%0A%09%09%09%09%2F%2F%20pushing%20imageDescriptor%20%2B%20imageData%20block%20%2B%20any%0A%09%09%09%09blocks.push(block)%3B%20%0A%09%09%09%09block%20%3D%20%5B%5D%3B%0A%09%09%09%7D%0A%09%09%09else%20if(blockType%20%3D%3D%20%27Image%20Descriptor%27)%7B%20%0A%09%09%09%09%2F%2F%20image%20descriptor%0A%09%09%09%09blockSize%20%3D%2010%3B%0A%09%09%09%09block.push(data.slice(lastByte%2ClastByte%2BblockSize))%3B%0A%09%09%09%09lastByte%20%2B%3D%20blockSize%3B%0A%09%09%09%09%2F%2F%20local%20color%20table%0A%09%09%09%09tableSize%20%3D%20getColorTableBlockSize(data%2C%20lastByte)%0A%09%09%09%09if(tableSize%20%3E%200)%7B%20block.push(data.slice(lastByte%2ClastByte%2BtableSize))%3B%20lastByte%20%2B%3D%20tableSize%3B%7D%20%0A%09%09%09%7D%0A%09%09%09else%20if(%20blockType.split(%27%20%27).at(-1)%20%3D%3D%20%27Extension%27)%7B%0A%09%09%09%09%2F%2F%20Extension%0A%09%09%09%09blockSize%20%3D%20getBlockSize(data%2C%20lastByte%2C2)%3B%0A%09%09%09%09block.push(data.slice(lastByte%2ClastByte%2BblockSize))%3B%0A%09%09%09%09lastByte%20%2B%3D%20blockSize%3B%0A%09%09%09%7D%0A%09%09%09else%20if(blockType%20%3D%3D%20%27Trailer%27)%7B%20%0A%09%09%09%09%2F%2F%20trailer%0A%09%09%09%09blockSize%20%3D%201%3B%0A%09%09%09%09block.push(data.slice(lastByte%2ClastByte%2BblockSize))%3B%0A%09%09%09%09lastByte%20%2B%3D%20blockSize%3B%0A%09%09%09%09%2F%2F%20pushing%20header%20block%0A%09%09%09%09blocks.push(block)%3B%20%0A%09%09%09%09block%20%3D%20%5B%5D%3B%20%0A%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09%7D%20catch(e)%20%7B%20console.log(e)%3B%20blocks.push%5B59%5D%20%7D%0A%09%09%0A%09%09return%20blocks%3B%0A%09%09%0A%09%09function%20getColorTableBlockSize(dataStream%2C%20startingByte)%20%7B%0A%09%09%09%2F%2F%20The%20global%20color%20table%20size%20is%20stored%20in%20byte%2010%2C%20so%20put%2011.%0A%09%09%09%2F%2F%20for%20local%20color%20tables%20its%20stored%20on%20the%20previous%20byte.%0A%09%09%09let%20x%20%3D%20dataStream.slice(startingByte-1%2CstartingByte)%3B%0A%09%09%09x%20%3D%20x%5B0%5D.toString(2).padStart((255).toString(2).length%2C%20%270%27)%0A%09%09%09%2F%2F%20if%20the%20Global%20color%20table%20flag%20is%20false%20%3D%20zero%20colors.%0A%09%09%09if%20(x%5B0%5D%20%3D%3D%20%270%27)%20%7Breturn%200%7D%3B%0A%09%09%09%2F%2F%20getting%20the%20bits%20about%20%27Size%20of%20global%20color%20table%27%20and%20convert%20to%20decimal%0A%09%09%09x%20%3D%20x%5B5%5D%20%2B%20x%5B6%5D%20%2B%20x%5B7%5D%3B%0A%09%09%09%2F%2F%20convert%20to%20decimal%20(from%20a%20string%200b)%0A%09%09%09x%20%3D%20parseInt(x%2C%202)%0A%09%09%09%2F%2F%20Color%20table%20length%20is%202%5E(x%2B1)*3%2C%0A%09%09%09x%20%3D%20Math.pow(2%2Cx%2B1)*3%3B%0A%09%09%09return%20x%3B%0A%09%09%7D%0A%09%09%0A%09%09%0A%09%09function%20getBlockSize(dataStream%2C%20startingByte%2Coffset)%20%7B%0A%09%09%09%2F%2F%20Straight%20to%20data%2C%20we%20want%20length%20%5B%2721%27%2C%27XX%27%2C%27Size%27%5D%2C%20Size%20its%20the%20byte%20to%20check%2C%20if%20its%20an%20extension.%20(then%20offset%20%3D%202)%0A%09%09%09%2F%2F%20Straight%20to%20data%2C%20we%20want%20length%20%5B%27XX%27%2C%27Size%27%5D%2C%20Size%20its%20the%20byte%20to%20check%2C%20if%20its%20an%20image%20data.%20(then%20offset%20%3D%201)%0A%09%09%09let%20i%20%3D%20startingByte%2Boffset%3B%20%0A%09%09%09let%20x%20%3D%200%20%2F%2F%20subBlock%20size%0A%09%09%09do%20%7B%0A%09%09%09%09x%20%3D%20dataStream.slice(i%2Ci%2B1)%5B0%5D%3B%0A%09%09%09%09i%20%2B%3D%20x%2B1%3B%0A%09%09%09%09if(x%20%3D%3D%20undefined)%20%7B%20throw%20%27%5BFramesJS%5D%20found%20a%20broken%20block%27%3B%20%7D%0A%09%09%09%7Dwhile(x%20!%3D%200)%3B%20%2F%2F%200%20means%20we%20hit%20a%20%5B%2700%27%5D%20byte%2C%20a%20terminator%20byte%0A%09%09%09return%20i-startingByte%3B%20%2F%2F%20the%20difference%20between%20where%20we%20started%20and%20where%20we%20found%20the%20%2700%27%0A%09%09%7D%0A%0A%09%09%0A%09%09function%20getBlockType(dataStream%2C%20startingByte)%7B%0A%09%09%09let%20x%20%3D%20dataStream.slice(startingByte%2CstartingByte%2B2)%3B%0A%09%09%09if%20(x%5B0%5D%20%3D%3D%2044)%20%7B%20return%20%27Image%20Descriptor%27%3B%20%7D%0A%09%09%09if%20(x%5B0%5D%20%3D%3D%2059)%20%7B%20return%20%27Trailer%27%3B%20%7D%0A%09%09%09if%20(x%5B0%5D%20%3D%3D%2033)%20%7B%20%20%0A%09%09%09%09if%20(x%5B1%5D%20%3D%3D%20249)%20%7B%20return%20%27Graphics%20Control%20Extension%27%3B%20%7D%0A%09%09%09%09if%20(x%5B1%5D%20%3D%3D%201)%20%7B%20return%20%27Plain%20Text%20Extension%27%3B%20%7D%0A%09%09%09%09if%20(x%5B1%5D%20%3D%3D%20255)%20%7B%20return%20%27Application%20Extension%27%3B%20%7D%0A%09%09%09%09if%20(x%5B1%5D%20%3D%3D%20254)%20%7B%20return%20%27Comment%20Extension%27%3B%20%7D%0A%09%09%09%7D%0A%09%09%09return%20%27Image%20Data%27%3B%0A%09%09%7D%0A%09%7D%0A%09%0A%09function%20sleep(ms)%20%7B%20return%20new%20Promise(resolve%20%3D%3E%20setTimeout(resolve%2C%20ms))%3B%20%7D%0A%0A%7D%09%0A%0Athis.DrawCurrentFrame%20%3D%20function()%20%7B%0A%09try%20%7B%0A%09if(this.currentFrame%20%3E%3D%20this.frameList.length%20)%20%20%7B%20this.currentFrame%20%3D%200%3B%20%20%7D%20%2F%2F%20loop%20back%0A%09if(this.currentFrame%20%3C%200)%20%7B%20this.currentFrame%20%3D%20this.frameList.length-1%3B%20%7D%20%2F%2F%20loop%20backward%0A%09let%20img%20%3D%20this.frameList%5Bthis.currentFrame%5D.HTMLImageElement%3B%0A%09this.ctxGifEmulator.clearRect(%200%2C%200%2C%20this.ctxGifEmulator.canvas.width%2C%20this.ctxGifEmulator.canvas.height%20)%3B%0A%09this.ctxGifEmulator.drawImage(img%2C%200%2C%200)%3B%0A%09%7D%20catch%20(e)%20%7B%7D%3B%0A%7D%0A%0Athis.createDefaultGifEmulatorController%20%3D%20function()%7B%0A%09let%20x%20%3D%20this.FramesJS_OverlaySystem(this.ctxGifEmulator.canvas%2Cfalse%2C%27FrameJS-DefaultGifEmulatorController%27%2C%27%27%2C%27.FrameJS-DefaultGifEmulatorController%20%7B%20transition%3A0.2s%3B%20background-color%3A%20rgba(0%2C0%2C0%2C0.5)%3B%20color%3A%20white%3B%20transition%3A%200.2s%3B%20z-index%3A10001%20!important%7D%27)%3B%0A%09this.controller%20%3D%20%20x.overlayList%5B0%5D.overlay%3B%0A%09this.controller.innerHTML%20%3D%20%60%0A%09%3Cdiv%20style%3D%27padding%3A1ex%27%3E%0A%09%09%3Cbutton%3EKill%3C%2Fbutton%3E%0A%09%09%3Cbutton%3E%2F%2F%2F%3C%2Fbutton%3E%0A%09%09%3Cbutton%3E%5E%3C%2Fbutton%3E%0A%09%09%3Cbutton%3Esource%3C%2Fbutton%3E%0A%09%09%3Cbutton%3EPick%3C%2Fbutton%3E%3Cbr%3E%0A%09%09%3Cbutton%3EPlay%2FPause%3C%2Fbutton%3E%0A%09%09%3Cbutton%3E%3C%3C%2Fbutton%3E%0A%09%09%3Cbutton%3E%3E%3C%2Fbutton%3E%20%3Cbr%3E%0A%09%09go-to%20%3Cinput%20min%3D%270%27%20type%3D%27number%27%20%3E%3C%2Finput%3E%3Cbr%3E%0A%09%3Cspan%20class%3D%27DefaultCurrentFrameDisplay%27%3E%3C%2Fspan%3E%20%2F%20%20%3Cspan%20class%3D%27DefaultTotalFramesDisplay%27%3E%3C%2Fspan%3E%0A%09%3C%2Fdiv%3E%60%0A%09this.controller.querySelectorAll(%27button%27)%5B0%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.Kill()%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B1%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.SeeTrough()%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B2%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.Pin()%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B3%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.OpenSource()%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B4%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.ExtractFrameGif()%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B5%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.PlayPauseGif()%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B6%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.NudgeGif(-1)%3B%20selfReference.DrawCurrentFrame()%3B%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27button%27)%5B7%5D.addEventListener(%27click%27%2C%20function()%20%7B%20selfReference.NudgeGif(1)%3B%20selfReference.DrawCurrentFrame()%3B%20%20%7D%20)%3B%0A%09this.controller.querySelectorAll(%27input%27)%5B0%5D.addEventListener(%27change%27%2C%20function()%20%7B%20selfReference.GoToFrameGif(this)%3B%20selfReference.DrawCurrentFrame()%3B%20%20%7D%20)%3B%0A%09this.ctxGifEmulator.canvas.addEventListener(%27mouseenter%27%2C%20selfReference.OpenController)%3B%0A%09this.ctxGifEmulator.canvas.addEventListener(%27mouseleave%27%2C%20selfReference.CloseController)%3B%0A%09this.controller.addEventListener(%27mouseenter%27%2C%20selfReference.OpenController)%3B%0A%09this.controller.addEventListener(%27mouseleave%27%2C%20selfReference.CloseController)%3B%0A%09this.controllerIntervalId%20%3D%20x.intervalId%3B%0A%09this.currentFrameDisplay%20%3D%20selfReference.controller.querySelector(%27.DefaultCurrentFrameDisplay%27)%3B%20%0A%09this.totalFramesDisplay%20%3D%20selfReference.controller.querySelector(%27.DefaultTotalFramesDisplay%27)%3B%0A%7D%0A%0Athis.PlayPauseGif%20%3D%20function()%20%7B%0A%09this.isPaused%20%3D%20!this.isPaused%3B%0A%7D%0Athis.NudgeGif%20%3D%20function(ammount)%20%7B%0A%09this.currentFrame%20%2B%3D%20ammount%3B%0A%7D%0Athis.GoToFrameGif%20%3D%20function(input)%20%7B%0A%09this.currentFrame%20%3D%20parseInt(input.value)%3B%0A%7D%0Athis.ExtractFrameGif%20%3D%20function(input)%20%7B%20%0A%09let%20a%20%3D%20document.createElement(%27a%27)%0A%09a.download%20%3D%20this.currentFrame%2B%27%27%3B%0A%09a.href%20%3D%20this.frameList%5Bthis.currentFrame%5D.HTMLImageElement.src%2B%27%27%3B%0A%09document.querySelector(%27body%27).appendChild(a)%3B%20a.click()%3B%20document.querySelector(%27body%27).removeChild(a)%3B%0A%7D%0A%09%0A%0A%7D%0A%0Avar%20FrameJS%20%3D%20new%20FramesJS()%3B%0AFrameJS.SelectElementEvent(%27video%2C%20img%2C%20iframe%27)%3B
})()">
<div class="testButton" >
<span>[FramesJS.js]</span><br>
</div>

</a> <span class="unimportant"><b><- Click me to try it!</b></span>

<br> <hr class="sep">

<div style="border-left: 1px dashed rgba(255,0,0,0.5); padding:1ex">
<span class="red" style="font-family:MS PGothic" >(っ・ω・)っ</span> Read below. <br> <br>
<div class="important">
<span> Upload an image, then click the red box to use the script.</span> <br>
<span> Add <b class="red-soft">[FrameJS.js]</b> to bookmarks to use it anywhere!</span> <br>
<span> <span class="red-soft">[CTRL + SHIFT + B]</span>, then drag the red box to the bookmarks bar. </span> <br> <br>
<span> <b class="red-soft">[Right-click anywhere -> Save]</b> to use this page offline! </span>
</div>

<hr class="sep">

<span class="unimportant"> Check code at <a  class="link" target="_blank" href="https://github.com/xRIPY/xRIPY.github.io/tree/master/FramesJS">https://github.com/xRIPY/xRIPY.github.io/tree/master/FramesJS</a> </span>

<hr class="sep">
<div style="border-left: 1px dashed rgba(255,0,0,0.5);" class="clickToReveal" >
<span class="unimportant" onclick="if(this.parentNode.querySelector('div').style.display == 'block') {this.parentNode.querySelector('div').style.display = 'none'} else { this.parentNode.querySelector('div').style.display = 'block' }" >Click <b class="red-soft">[this]</b> for bonus seals!</span>
<div style="display: none;" class="unimportant">
<video title="A seal VIDEO!" style="height:50ex;" controls src="examples/Scratch.mp4"></video>
<img title="A seal GIF!" style="height:25ex;" src="examples/Hehe.gif"></img>
<img title="A seal IMAGE!" style="height:25ex;" src="examples/Plushie.jpg"></img>
</div>
</div>

<hr class="sep">
<div style="border-left: 1px dashed rgba(255,0,0,0.5);" class="clickToReveal" >
<span class="unimportant" onclick="if(this.parentNode.querySelector('pre').style.display == 'block') {this.parentNode.querySelector('pre').style.display = 'none'} else { this.parentNode.querySelector('pre').style.display = 'block' }">Click <b class="red-soft">[this]</b> for development info.</span>
<pre  style="display: none;" class="unimportant">
Quick rundown: | A really simple system, select the HTML video/image element, and an overlay will appear with controls to move around the animation frame by frame.
Time taken: | 2+ weeks.
Comment: | Made every possible mistake, re-written the code at least 4 times, until I found this solution... Which I'm happy with.
-
For videos it works just fine; the browser already has everything needed to go frame by frame (except FPS informations).
Sometimes videos may be found inside an iFrame, if that's the case, the script will give a link to the source of the iFrame, where the video is stored.
For GIFs it's another story, had to create what I named "GifEmulator", a canvas where every frame it's drawn.
The caching process is slow, really slow; there is no optimization whatsoever... Consider using <a class="link" target="_blank" href="https://slbkbs.org/jsgif/">jsgif</a> instead for GIFs frame by frame.
BUT my version is compatible with some "special" GIFs, as I have included a "broken gif fix" and a "disposal method 3 check".
...YET, I managed to find gifs where my script doesn't work, somehow. I'm tired. What a shame tsk tsk...

Examples: 
<img title="Disposal method 3" style="height:25ex;" src="examples/kabe2.gif"></img> <img title="Broken Gif" style="height:25ex;" src="examples/saksealthunder.gif"></img> <img title="Doesn't work I:" style="height:25ex;" src="examples/Shame.gif"></img>
</pre>
</div>
</div>

<!-- End -->

<span id="footer">By <span class="red"> RIPY </span> @xripy</span>
<script src="script.js"></script>
<script src="FramesJS.js"></script>
</body>

<!-- Div templates -->

<div class="templateArea">
<div id="video"> 
	<div class="ResizableDiv">
		<video class="ResizeableElement" id="preview"></video>
	</div>
</div>
<div id="image"> 
	<div class="ResizableDiv">
		<img  class="ResizeableElement" id="preview"></img>
	</div>
</div>
<div id="error">
	<strong class="red-soft">Error, not supported</strong> <br>
	<span>Currently only supports video/gif/image formats</span>
</div>
<div id="error2">
	<strong class="red-soft">Error, resource failed to open</strong> <br>
	<span>Be sure what you are inputting is the source of the file.</span>
</div>
<div id="loading">
	<strong class="red-soft">Loading, Please wait!</strong> <br>
	<span><img  src="data:image/gif;base64,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"></img></span>
</div>
</div>

</html>